<!DOCTYPE html><html lang="en" class="h-full"> <script>(function(){const myName = "DamiÃ¡n Pumar";
const commitVersion = "2dfb3d48";
const commitDate = "2024.05.27";

  const color = "color: #f87171";
  console.log(`%c Hi developer! ğŸ‘‹. I'm ${myName}`, color);
  console.log(`%c Release date: ${commitDate}`, color);
  console.log(`%c Release version: ${commitVersion}`, color);
})();</script> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternate" href="https://www.damianpumar.com/feed.xml" type="application/rss+xml"><meta name="title" content="DamiÃ¡n Pumar | Add new functionality with less code âŒ¨ï¸"><meta name="description" content="In this post I will explain how can you add it new functionality with less changes are posible, without modifying the design of your application, without breaking any SOLID principles using the decorator pattern."><meta property="og:type" content="website"><meta property="og:url" content="https://www.damianpumar.com/blog/2024-01-02/"><meta property="og:title" content="Add new functionality with less code âŒ¨ï¸"><meta property="og:description" content="In this post I will explain how can you add it new functionality with less changes are posible, without modifying the design of your application, without breaking any SOLID principles using the decorator pattern."><meta property="og:image" content="https://www.damianpumar.com/v1/generate/og/2024-01-02.png"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.damianpumar.com/blog/2024-01-02/"><meta property="twitter:title" content="Add new functionality with less code âŒ¨ï¸"><meta property="twitter:description" content="In this post I will explain how can you add it new functionality with less changes are posible, without modifying the design of your application, without breaking any SOLID principles using the decorator pattern."><meta property="twitter:image" content="https://www.damianpumar.com/v1/generate/og/2024-01-02.png"><meta name="release-date" content="2024.05.27"><meta name="release-version" content="2dfb3d48"><link rel="canonical" href="https://www.damianpumar.com/blog/2024-01-02/"><link rel="icon" type="image/png" href="/favicon.png"><title>DamiÃ¡n Pumar | Add new functionality with less code âŒ¨ï¸</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/assets/_slug_.CrD-P8Ow.css"><style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}
</style><style>@font-face{font-family:"DM Serif Text";font-style:normal;font-display:swap;src:url(/fonts/dm-serif.ttf) format("truetype")}@font-face{font-family:Outfit;font-style:normal;font-display:swap;src:url(/fonts/outfit.ttf) format("truetype")}@font-face{font-family:Poppins;font-style:normal;font-display:swap;src:url(/fonts/poppins.ttf) format("truetype")}@font-face{font-family:Righteous;font-style:normal;font-display:swap;src:url(/fonts/righteous.ttf) format("truetype")}@font-face{font-family:Sanchez;font-style:normal;font-display:swap;src:url(/fonts/sanchez.ttf) format("truetype")}.outfit{font-family:Outfit,sans-serif}.righteous{font-family:Righteous,sans-serif}.dm-serif{font-family:"DM Serif Text",serif}.fredoka{font-family:Fredoka One,sans-serif}.poppins{font-family:Poppins,sans-serif}.sanchez{font-family:Sanchez,serif}
</style><style>html{scroll-behavior:smooth}.card-shadow{border-radius:.5rem;border:3px solid black;-webkit-box-shadow:7px 7px 0px 0px rgb(0 0 0 / 1);-moz-box-shadow:7px 7px 0px 0px rgb(0 0 0 / 1);box-shadow:7px 7px #000;transition:all;transition-duration:.5s;animation:ease-in-out}.card-shadow:hover{-webkit-box-shadow:5px 5px 0px 0px rgb(0 0 0 / 1);-moz-box-shadow:5px 5px 0px 0px rgb(0 0 0 / 1);box-shadow:5px 5px #000}
</style><style>.i-sessionize{--sessionize-icon: url('data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="24" height="24" viewBox="0 0 24 24"%3E%3Cpath fill="currentColor" d="M12 0c6.628 0 12 5.372 12 12v10c0 1.097-.903 2-2 2h-7.5l-.001-.169c-.049-2.894-1.347-4.902-3.709-5.96L24 12l-.32-.109c-2.858-.999-5.251-2.462-7.18-4.391c-1.928-1.928-3.392-4.322-4.391-7.181zL4 18c0 .667.167 1.167.5 1.5c.334.334.834.5 1.5.5l.187.001c3.771.04 5.313 1.295 5.313 3.999H2c-1.097 0-2-.903-2-2V2C0 .903.903 0 2 0zm7.207 4.793c-.781-.781-1.73-1.097-2.121-.707c-.39.39-.074 1.34.707 2.121c.781.781 1.731 1.098 2.121.707c.391-.39.074-1.34-.707-2.121"%2F%3E%3C%2Fsvg%3E');-webkit-mask:var(--sessionize-icon) no-repeat;mask:var(--sessionize-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;width:1.2rem;height:1.2rem}
</style><script src="/assets/ViewTransitions.astro_astro_type_script_index_0_lang.DZL4CV8D.js" type="module"></script></head><body> <header class="border-b-4 border-black flex justify-between p-6 items-center">  <a href="/" title="Home"> <p class="righteous text-3xl md:text-4xl lg:text-5xl select-none"> DamiÃ¡n Pumar </p> </a> <nav class="hidden md:inline-block"> <h2 class="hidden">Navigation</h2> <ul class="flex items-center gap-6 poppins"> <li> <a class="text-lg font-medium hover:text-green hover:underline transition-all duration-150 ease-in-out select-none" href="/" title="Go to Home"> Home </a> </li><li> <a class="text-lg font-medium hover:text-green hover:underline transition-all duration-150 ease-in-out select-none" href="/events/" title="Go to Events"> Events </a> </li><li> <a class="text-lg font-medium hover:text-green hover:underline transition-all duration-150 ease-in-out select-none" href="/courses/" title="Go to Courses"> Courses </a> </li><li> <a class="text-lg font-medium hover:text-green hover:underline transition-all duration-150 ease-in-out select-none" href="/blog/" title="Go to Blog"> Blog </a> </li><li> <a class="text-lg font-medium hover:text-green hover:underline transition-all duration-150 ease-in-out select-none" href="mailto:pumar@duck.com" title="Go to Contact"> Contact </a> </li> <li> <a href="https://github.com/damianpumar" class="hover:text-green hover:underline transition-all duration-150 ease-in-out" target="_blank" title="See @DamianPumar on GitHub"> <div class="i-uil-github w-6 h-6"></div> </a> </li><li> <a href="https://twitter.com/damianpumar" class="hover:text-green hover:underline transition-all duration-150 ease-in-out" target="_blank" title="See @DamianPumar on Twitter"> <div class="i-uil-twitter w-6 h-6"></div> </a> </li><li> <a href="https://www.linkedin.com/in/damianpumar/" class="hover:text-green hover:underline transition-all duration-150 ease-in-out" target="_blank" title="See @DamianPumar on Linkedin"> <div class="i-uil-linkedin w-6 h-6"></div> </a> </li><li> <a href="https://sessionize.com/damianpumar" class="hover:text-green hover:underline transition-all duration-150 ease-in-out" target="_blank" title="See @DamianPumar on Sessionize"> <div class="i-sessionize w-6 h-6"></div> </a> </li><li> <a href="/feed.xml" class="hover:text-green hover:underline transition-all duration-150 ease-in-out" target="_blank" title="See @DamianPumar on RSS"> <div class="i-uil-rss w-6 h-6"></div> </a> </li> </ul> </nav> <nav class="md:hidden flex"> <h2 class="hidden">Mobile Navigation</h2> <ul class="flex flex-row gap-4 text-xl"> <li> <a href="/events/">Events</a> </li><li> <a href="/courses/">Courses</a> </li> </ul> </nav> </header>  <main class="p-6 lg:grid lg:grid-cols-3 flex justify-center"> <aside> <nav class="hidden lg:block sticky top-6"> <ul> <li class="py-1">  <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#what-is-the-decorator-pattern"> What is the decorator pattern? ğŸ¤” </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#advantages-of-the-decorator-pattern"> Advantages of the decorator pattern ğŸ¤© </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#disadvantages-of-the-decorator-pattern"> Disadvantages of the decorator pattern ğŸ˜” </a> </li><li class="py-1">  <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#how-to-implement-the-decorator-pattern-in-typescript"> How to implement the decorator pattern in Typescript? ğŸ¤“ </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#first-step-ï¸"> First step ğŸƒâ€â™‚ï¸ </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#second-step-ï¸"> Second step ğŸƒâ€â™‚ï¸ </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#third-step-ï¸"> Third step ğŸƒâ€â™‚ï¸ </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#fourth-step-ï¸"> Fourth step ğŸƒâ€â™‚ï¸ </a> </li><li class="py-1"> <span class="inline-block w-4"></span> <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#last-step-ï¸"> Last step ğŸƒâ€â™‚ï¸ </a> </li><li class="py-1">  <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#conclusion"> Conclusion ğŸ¤“ </a> </li><li class="py-1">  <a class="hover:text-stone transition-all duration-150 ease-in-out text-dark poppins" href="#references"> References ğŸ“š </a> </li> </ul> </nav> </aside> <article class="prose-slate w-sm md:w-prose md:prose poppins"> <a href="/blog">&larr; Back to blog</a> <p class="text-slate text-sm md:text-base">
Published on January 2, 2024 by DamiÃ¡n Pumar </p>  <p>Sometimes we need to add new functionality to an existing object, but we donâ€™t want to modify the existing structure of the object, we want to add the new functionality in a transparent way for the consumer, still all tests passing and no violate any SOLID principle.</p>
<p>To achieve this we can use the decorator pattern ğŸ’ª.</p>
<h1 id="what-is-the-decorator-pattern">What is the decorator pattern? ğŸ¤”</h1>
<p>The decorator pattern is a design pattern that allows us to add new functionality to an existing object without modifying its structure. The decorator pattern is a structural pattern, part of 23 GOF patterns.</p>
<h2 id="advantages-of-the-decorator-pattern">Advantages of the decorator pattern ğŸ¤©</h2>
<ul>
<li>Add new functionality without modifying the existing structure.</li>
<li>Add new functionality at runtime.</li>
<li>Add new functionality to an existing object in a transparent way for the consumer.</li>
</ul>
<h2 id="disadvantages-of-the-decorator-pattern">Disadvantages of the decorator pattern ğŸ˜”</h2>
<ul>
<li>It can generate a lot of classes if we use it in an uncontrolled way.</li>
</ul>
<h1 id="how-to-implement-the-decorator-pattern-in-typescript">How to implement the decorator pattern in Typescript? ğŸ¤“</h1>
<p>Imagine that we have a class has an existing behavior, but we need to extends this functionality but in other object instead to add new lines on the existing class.</p>
<p>For example imagine that we have a class called <code>NotificationSender</code> that has a method called <code>send</code> that sends a notification to a user via email. Now we need to add a new functionality to this class, for example we need to send two notifications to the user, one by email and another by sms.</p>
<p>We could modify the <code>NotificationSender</code> class and add the new functionality, but this would violate the open-closed principle, which says that a class should be open for extension but closed for modification. For this reason we will use the decorator pattern.</p>
<p>Letâ€™s see the original <code>NotificationSender</code> class ğŸ‘‡</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> NotificationSender</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  send</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">message</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // send notification to user by email</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>And now letâ€™s see how we can add the new functionality using the decorator pattern ğŸ‘‡</p>
<h2 id="first-step-ï¸">First step ğŸƒâ€â™‚ï¸</h2>
<p>The first step is to create an interface that defines the behavior of the class that we want to decorate. In our case we will create an interface called <code>INotificationSender</code> that defines the behavior of the <code>NotificationSender</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> INotificationSender</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  send</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">message</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h2 id="second-step-ï¸">Second step ğŸƒâ€â™‚ï¸</h2>
<p>Extend the <code>NotificationSender</code> class to implement the <code>INotificationSender</code> interface.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> NotificationSender</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> INotificationSender</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  send</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">message</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">    // send notification to user by email</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h2 id="third-step-ï¸">Third step ğŸƒâ€â™‚ï¸</h2>
<p>Create a class that implements the <code>INotificationSender</code> interface and receives an instance of the <code>INotificationSender</code> interface in the constructor. In our case we will create a class called <code>NotificationSenderViaSMS</code> that implements the <code>INotificationSender</code> interface.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> NotificationSenderViaSMS</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> INotificationSender</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">private</span><span style="color:#FFAB70"> notificationSender</span><span style="color:#F97583">:</span><span style="color:#B392F0"> INotificationSender</span><span style="color:#E1E4E8">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  send</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">message</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.notificationSender.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(user, message);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>This is the key of the decorator pattern, the <code>INotificationSender</code> implementation class receives an instance of the <code>INotificationSender</code> (other object with same type).</p>
<h2 id="fourth-step-ï¸">Fourth step ğŸƒâ€â™‚ï¸</h2>
<p>Implement the sms notification into <code>NotificationSenderViaSMS</code> class.</p>
<p>First we send the notification by email using the <code>notificationSender</code> instance and then we send the notification by sms.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> NotificationSenderViaSMS</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> INotificationSender</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">private</span><span style="color:#FFAB70"> notificationSender</span><span style="color:#F97583">:</span><span style="color:#B392F0"> INotificationSender</span><span style="color:#E1E4E8">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  send</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user</span><span style="color:#F97583">:</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">message</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.notificationSender.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(user, message);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Here send notification to user by sms</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h2 id="last-step-ï¸">Last step ğŸƒâ€â™‚ï¸</h2>
<p>We need to modify the instantiation of the <code>NotificationSender</code> class to use the <code>NotificationSenderViaSMS</code> class and pass it the <code>NotificationSender</code> instance.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#6A737D">// Previous code</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> notificationSender</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> NotificationSender</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// New code</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> notificationSender</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> NotificationSenderViaSMS</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">  new</span><span style="color:#B392F0"> NotificationSender</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">);</span></span>
<span class="line"></span></code></pre>
<h1 id="conclusion">Conclusion ğŸ¤“</h1>
<p>The decorator pattern is a very useful pattern that allows us to add new functionality to an existing object without modifying its structure, as a consumer just modify the instantiation of the class and the decorator pattern does the rest.</p>
<h1 id="references">References ğŸ“š</h1>
<ul>
<li><a href="https://refactoring.guru/design-patterns/decorator">Decorator Pattern</a></li>
</ul>
<p>Bye ğŸ™Œ</p>  <p class="text-slate">Written by DamiÃ¡n Pumar</p> <p class="mt-20">
Something wrong? <a href="mailto:pumar@duck.com?subject=Feedback about Add new functionality with less code âŒ¨ï¸">Let me know</a> ğŸ™
</p> <a href="/blog">&larr; Back to blog</a> </article> </main>  <footer class="bg-black poppins px-2 py-6 md-p-6 flex flex-row justify-between"> <h2 class="hidden">Footer</h2> <div class="text-white flex flex-row justify-between w-full md-w-md"> <span>|</span>  <a class="text-blue" href="/" target="_self" title="Go to Home"> Home </a> <span>|</span>  <a class="text-blue" href="/events/" target="_self" title="Go to Events"> Events </a> <span>|</span>  <a class="text-blue" href="/courses/" target="_self" title="Go to Courses"> Courses </a> <span>|</span>  <a class="text-blue" href="/blog/" target="_self" title="Go to Blog"> Blog </a> <span>|</span>  <a class="text-blue" href="mailto:pumar@duck.com" target="_self" title="Go to Contact"> Contact </a> <span>|</span>  2024 <span>|</span> </div> </footer> </body></html>